
@{
    ViewData["Title"] = "Users";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<h1>Users</h1>

<div class="col-12 container">
    <div class="row justify-content-between">

        <div class="col card card-body col-6 p-0">
            <table id="userTable" class="col-12 table table-hover table-bordered m-0">
                <thead>
                    <tr>
                        <td>Id</td>
                        <td>UserName</td>
                        <td>Email</td>
                        <td>Created</td>
                        <td>Updated</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col card card-body col-5">

        </div>
    </div>
</div>


@section Scripts{
<script>
$(document).ready(function(){
    var apiBaseUrl="@ViewBag.ApiBaseURL";
    GetUserList();

    function GetUserList(){
        $.ajax({
         url: apiBaseUrl + "/User",
         type: "GET",
         success: function (d) {
                UserToTable(d)
         },
         error:  function (d) {
         },
        });
    }

    function UserToTable(data){
        console.log(data);
        $("#userTable tbody").empty();
        var row="";
        $.each(data,function(i,item){
			row+= "<tr>";
			row+= "<td>" + item.id + "</td>";
			row+= "<td>" + item.userName + "</td>";
			row+= "<td>" + item.email + "</td>";
			row+= "<td>" + FormatDate(item.created) + "</td>";
            row+= "<td>" + FormatDate(item.updated) + "</td>";
			row+= "</tr>";
        });
        $("#userTable tbody").append(row);

    }

});


</script>
}