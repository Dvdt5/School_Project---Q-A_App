@{
    ViewData["Title"] = "Home Page";
}

<div class="container my-5">
    <div class="row">
        <!-- Sidebar with Categories -->
        <div class="col-md-1 mb-4">
            
        </div>

        <!-- Main Content: Recently Asked Questions -->
        <div class="col-md-8">
            <h3 class="mb-4">Recently Asked Questions</h3>
            <ul class="list-group" id="allPostsContainer">
                <li class="list-group-item">
                    <a href="#" class="text-decoration-none">How to center a div using Bootstrap 5?</a>
                    <small class="d-block text-muted">Asked 10 minutes ago · 2 answers</small>
                </li>
                <li class="list-group-item">
                    <a href="#" class="text-decoration-none">What’s the difference between px and rem?</a>
                    <small class="d-block text-muted">Asked 30 minutes ago · 5 answers</small>
                </li>
                <li class="list-group-item">
                    <a href="#" class="text-decoration-none">How to make a responsive navbar collapse?</a>
                    <small class="d-block text-muted">Asked 1 hour ago · 1 answer</small>
                </li>
                <li class="list-group-item">
                    <a href="#" class="text-decoration-none">How to use Bootstrap modal with dynamic content?</a>
                    <small class="d-block text-muted">Asked 2 hours ago · 3 answers</small>
                </li>
            </ul>
        </div>

        <div class="col-md-3 mb-4">
            <h5 class="mb-3">Categories</h5>
            <div class="list-group" id="categoryLinkList">
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script>

    $(document).ready(function(){
            var apiBaseUrl="@ViewBag.ApiBaseURL";
            GetCategoryList();
            GetPostList();
            function GetCategoryList(){
                $.ajax({
                 url: apiBaseUrl + "/Category",
                 type: "GET",
                 
                 success: function (d) {
        
                        CategoryToTable(d);
                 },
                 error:  function (d) {
                    
                    $("#categoryLinkList").html();
                    $("#categoryLinkList").html("<p>No Category Found</p>");
                 },
                });
            }

            function CategoryToTable(data){
                    $("#categoryLinkList").html();
                var row="";
                $.each(data,function(i,item){
                    row += `<a href="#" class="list-group-item list-group-item-action">`;
                    row += item.name;
                    row+= "</a>";
                });
                if (data.length === 0){
                    $("#categoryLinkList").html();
                    $("#categoryLinkList").html("<p>No Category Found</p>");
                } else {

                $("#categoryLinkList").html(row);
                }

            }

            function GetPostList(){
                $.ajax({
                 url: apiBaseUrl + "/Post",
                 type: "GET",
                 
                 success: function (d) {
              
                        PostsToTable(d);
                 },
                 error:  function (d) {
                    
                    $("#allPostsContainer").html();
                    $("#allPostsContainer").html("<p>No Post Found</p>");
                 },
                });
            }

            function PostsToTable(data){
                    $("#allPostsContainer").html();
                var row="";
                $.each(data,function(i,item){
                    row += `<li href="#" class="list-group-item list-group-item-action">`;
                    row += `<a href="#" class="text-decoration-none">${item.title}</a>`;
                    row += `<small class="d-block text-muted">${item.created}</small>`;
                    row+= "</li>";
                });
                if (data.length === 0){
                    $("#allPostsContainer").html();
                    $("#allPostsContainer").html("<p>No Post Found</p>");
                } else {

                $("#allPostsContainer").html(row);
                }

            }

    });
</script>

}